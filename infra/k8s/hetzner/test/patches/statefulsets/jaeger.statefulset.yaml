# Jaeger StatefulSet Patch for Hetzner Test Environment
# Adds moderate resources and storage for testing/staging
# Retention: 14 days
# Sampling: 10% (balance between visibility and performance)

apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: jaeger
spec:
  template:
    spec:
      containers:
        - name: jaeger
          resources:
            requests:
              cpu: 150m
              memory: 384Mi
            limits:
              cpu: 750m
              memory: 768Mi
          env:
            - name: BADGER_SPAN_STORE_TTL
              value: "336h" # 14 days retention for test
  volumeClaimTemplates:
    - metadata:
        name: jaeger-data
      spec:
        accessModes: ["ReadWriteOnce"]
        storageClassName: hcloud-volumes
        resources:
          requests:
            storage: 3Gi
